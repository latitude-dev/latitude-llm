# Environment
NODE_ENV=production

# Database
# These are used by the db container to set up the database the first time it's initialized
POSTGRES_USER=latitude
POSTGRES_PASSWORD=secret
# This is the URL the Latitude containers use to connect to the database, note the user and password must match the previous ones :point_up:
DATABASE_URL=postgresql://latitude:secret@db:5432/latitude_production

# Redis
# Latitude works best with two Redis instances: one for queues and one for
# caching. These variables control their host and port the Latitude containers
# use to connect to them
QUEUE_PORT=6379
QUEUE_HOST=redis
CACHE_PORT=6379
CACHE_HOST=redis
CACHE_PASSWORD= # Optional: set your cache password if Redis requires authentication

# Weaviate (copy all the below settings)
# Weaviate powers the automatic error discovery feature of Latitude. It's
# optional and can be ignored if you don't want to use it.
# ::::::::::::::::::::::::::
WEAVIATE_URL= # Optional: use Weaviate cloud
## Local Docker Weaviate settings
API_BASED_MODULES_DISABLED=true
ASYNC_INDEXING=true
AUTHENTICATION_ANONYMOUS_ACCESS_ENABLED=false
AUTHENTICATION_APIKEY_ALLOWED_KEYS=secret
AUTHENTICATION_APIKEY_ENABLED=true
AUTHENTICATION_APIKEY_USERS=latitude
AUTHORIZATION_ENABLE_RBAC=true
AUTHORIZATION_RBAC_ROOT_USERS=latitude
AUTOSCHEMA_ENABLED=false
CLUSTER_HOSTNAME=latitude
DEFAULT_QUANTIZATION=none
DEFAULT_VECTORIZER_MODULE=none
DISABLE_TELEMETRY=true
ENABLE_MODULES= # Note: leave blank
LOG_LEVEL=warning
PERSISTENCE_DATA_PATH=/var/lib/weaviate
QUERY_DEFAULTS_LIMIT=25
QUERY_MAXIMUM_RESULTS=100
WEAVIATE_API_KEY=secret
WEAVIATE_GRPC_PORT=50051
WEAVIATE_HOST=0.0.0.0
WEAVIATE_HTTP_PORT=8099

# :::::::::::::::::::::::
# Weaviate settings end

# ClickHouse (copy all the below settings)
# ClickHouse is a columnar database for analytics.
# ::::::::::::::::::::::::::
# URL for application connections (HTTP protocol)
CLICKHOUSE_URL=http://localhost:8123
# URL for migrations (native protocol) - used by golang-migrate
CLICKHOUSE_MIGRATION_URL=clickhouse://localhost:9000
CLICKHOUSE_DB=latitude_development
CLICKHOUSE_USER=latitude
CLICKHOUSE_PASSWORD=secret
# Cluster settings (set CLICKHOUSE_CLUSTER_ENABLED=true for production replicated setups)
CLICKHOUSE_CLUSTER_ENABLED=false
CLICKHOUSE_CLUSTER_NAME=default
# Set to true if ClickHouse requires SSL
CLICKHOUSE_MIGRATION_SSL=false
# :::::::::::::::::::::::
# ClickHouse settings end

# Gateway
# BIND env vars control the address and port the gateway container attaches to
GATEWAY_BIND_ADDRESS=localhost
GATEWAY_BIND_PORT=8787
# These env vars are used by Latitude containers to connect to the gateway.
GATEWAY_HOSTNAME=gateway # e.g gateway.myapp.com
GATEWAY_PORT=8080
GATEWAY_SSL=false

# Networking
# These env vars are used for misclenous purposes such as redirect URIs, email templates, among others.
APP_DOMAIN=latitude.localhost         # e.g myapp.com
APP_URL=http://app.latitude.localhost # e.g https://app.mayapp.com
# This is just to point users to the documentation in various parts of the app
NEXT_PUBLIC_DOCS_URL=http://docs.latitude.localhost # e.g https://docs.mayapp.com

# Traefik
# Configuration for traefik reverse proxy, only relevant if you are using the
# docker compose deployment, can be ignored otherwise
TRAEFIK_HOST=traefik.${APP_DOMAIN}
TRAEFIK_ACME_EMAIL=your@email.com
# Passwords must be hashed using MD5, SHA1, or BCrypt. Read more: https://doc.traefik.io/traefik/middlewares/http/basicauth/
# Example command to generate a password for user admin: echo $(htpasswd -nb admin password) | sed -e s/\\$/\\$\\$/g
TRAEFIK_ADMIN_PASS="your_secure_password"

# Websockets
# Thbe URI Latitude containers use to connect to the websockets server
WEBSOCKETS_SERVER=http://websockets
# The port the websockets server is listening on
WEBSOCKETS_SERVER_PORT=8080
WEBSOCKET_REFRESH_SECRET_TOKEN_KEY=websocket-refresh-secret-token
WEBSOCKET_SECRET_TOKEN_KEY=websocket-secret-token

# Email Configuration
# In production either use smtp or mailgun, in development use mailpit
MAIL_TRANSPORT=mailpit # smtp, mailgun, mailpit - default transport is mailpit
# This is the email address that will be used as the sender of emails
FROM_MAILER_EMAIL=hello@latitude.localhost # e.g hello@mayapp.com
# Only used if MAIL_TRANSPORT is set to mailgun
MAILGUN_EMAIL_DOMAIN=latitude.localhost # e.g email.myapp.com
MAILGUN_MAILER_API_KEY=                 # (optional)
MAILGUN_HOST=api.eu.mailgun.net         # (optional)
MAILGUN_PROTOCOL=https                  # (optional)
# SMTP Email Configuration (if MAIL_TRANSPORT is set to smtp)
SMTP_HOST=                     # e.g. smtp.gmail.com
SMTP_PORT=465                  # e.g. 465 or 587
SMTP_SECURE=true               # e.g. true SMTPS (465) or false for STARTTLS (587)
SMTP_USER=your_email@gmail.com # your email address
SMTP_PASS=your_app_password    # your email password (app password for Gmail)

# Sentry (optional)
# Sentry is used to track errors in the app, it's optional and can be ignored if you don't want to use it
NEXT_PUBLIC_SENTRY_DSN=
SENTRY_AUTH_TOKEN=
SENTRY_DSN=
SENTRY_ORG=
SENTRY_PROJECT=

# File storage
# NOTE: In docker environment "local" strategy will not work out of the box since
# multiple containers would need to have access to the same local disk. You can use "s3" strategy instead
# or set up a shared volume and point the public files path to it.
DRIVE_DISK=local # options: local, s3, gcs

# Used to configure storage if using local disk, can be ignored otherwise
FILE_STORAGE_ROOT_PATH="/app/storage/files"            # e.g /app/storage/files
FILE_PUBLIC_PATH="files"                               # e.g files
FILES_STORAGE_PATH="/app/storage/files"                # e.g /app/storage/files
PUBLIC_FILES_STORAGE_PATH="/app/apps/web/public/files" # e.g /app/storage/public/files (IMPORTANT: has to be in nextjs's public folder)

# AWS S3 (optional)
# If you are using AWS IAM roles, you can skip AWS_ACCESS_KEY and AWS_ACCESS_SECRET
AWS_REGION=
AWS_ACCESS_KEY=
AWS_ACCESS_SECRET=
PUBLIC_S3_BUCKET=
S3_BUCKET=

# GCS (optional)
GCS_BUCKET=
GCS_PUBLIC_BUCKET=
GCS_PROJECT_ID=
GCS_KEY_FILENAME=
GCS_CLIENT_EMAIL=
GCS_PRIVATE_KEY=

# Analytics (optional)
# Used to configure product analytics in Latitude Cloud, can be ignored
NEXT_PUBLIC_POSTHOG_KEY=
NEXT_PUBLIC_POSTHOG_HOST=

# Google OAuth
# Used to configure Google OAuth login
GOOGLE_CLIENT_ID=fake
GOOGLE_CLIENT_SECRET=fake
GOOGLE_REDIRECT_URI=${APP_URL}/api/auth/google/callback

# Next.js Server Actions
# This key is used to encrypt server actions. It must be the same across all server instances.
# You can generate a key using the tools/generate-server-action-key.js script.
NEXT_SERVER_ACTIONS_ENCRYPTION_KEY=

# New workspaces come preconfigured with an OpenAI provider, here you can
# configure its API key. If you don't configure this correctly the onboarding
# will not work (but you can skip it).
DEFAULT_PROVIDER_API_KEY=openai-api-key

# Engine
# Our Python engine powers advanced LLM optimizations and distillations
# It's optional and can be ignored if you don't want to use it
ENGINE_PATH=/app/apps/engine
ENGINE_PYTHON=python3 # It is recommended to use the Python from the virtual environment

# Copilot (cloud & enterprise)
# Copilot are all the AI features that power Latitude. Reserved to cloud and
# enterprise customers.
COPILOT_PROMPT_AGENT_DETAILS_GENERATOR_PATH=
COPILOT_PROMPT_ANNOTATION_GENERALIZER_PATH=
COPILOT_PROMPT_DATASET_GENERATOR_PATH=
COPILOT_PROMPT_EDITOR_COPILOT_PATH=
COPILOT_PROMPT_EVALUATION_GENERATOR_V2_PATH=
COPILOT_PROMPT_ISSUE_DETAILS_GENERATOR_PATH=
COPILOT_PROMPT_ISSUE_EVALUATION_GENERATOR_PATH=
COPILOT_PROMPT_LATTE_PATH=
COPILOT_PROMPT_OPTIMIZATION_PROPOSER_PATH=
COPILOT_PROMPT_SIMULATE_TOOL_RESPONSES_PATH=
COPILOT_PROMPT_SIMULATE_USER_RESPONSE_PATH=

# Temporal
# Temporal powers workflow orchestration for experiments, simulations, and background runs.
# Self-hosted mode (default): runs against a local Temporal server with no auth.
# Hosted mode (Temporal Cloud): set TEMPORAL_API_KEY and TEMPORAL_TLS=true.
TEMPORAL_ADDRESS=temporal:7233
TEMPORAL_NAMESPACE=default
TEMPORAL_TASK_QUEUE=latitude-workflows
TEMPORAL_API_KEY=           # Optional: API key for hosted Temporal Cloud
TEMPORAL_TLS=false          # Optional: set to true for hosted Temporal Cloud
TEMPORAL_TLS_CERT_PATH=     # Optional: path to TLS client cert for mTLS (self-hosted enterprise)
TEMPORAL_TLS_KEY_PATH=      # Optional: path to TLS client key for mTLS (self-hosted enterprise)
TEMPORAL_TLS_SERVER_NAME=   # Optional: TLS server name override (self-hosted enterprise)

LATITUDE_ENTERPRISE_MODE=

ENTERPRISE_COPILOT_PROJECT_NAME=
ENTERPRISE_COPILOT_WORKSPACE_NAME=
ENTERPRISE_OPENAI_API_KEY=
