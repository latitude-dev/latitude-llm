import { env } from '@latitude-data/env'
import { AutogenerateDatasetNotAvailableModal } from './AutogenerateDatasetNotAvailableModal'
import { GenerateDatasetModal } from './GenerateDatasetModal'

export default async function GenerateDatasetPage({
  searchParams,
}: {
  searchParams: Promise<{
    parameters?: string
    name?: string
    backUrl?: string
  }>
}) {
  if (!env.LATITUDE_CLOUD) return <AutogenerateDatasetNotAvailableModal />

  const { parameters, name, backUrl } = await searchParams
  const defaultParameters = parameters ? parameters.split(',') : []
  return (
    <GenerateDatasetModal
      backUrl={backUrl}
      defaultName={name}
      defaultParameters={defaultParameters}
    />
  )
}
