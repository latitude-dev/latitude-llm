import env from '$/env'
import { AutogenerateDatasetNotAvailableModal } from './AutogenerateDatasetNotAvailableModal'
import { GenerateDatasetContent } from './GenerateDatasetContent'

export default async function GenerateDatasetPage({
  searchParams,
}: {
  searchParams: Promise<{
    parameters?: string
    name?: string
    backUrl?: string
  }>
}) {
  const { parameters, name, backUrl } = await searchParams

  let defaultParameters
  if (parameters) {
    defaultParameters = parameters.split(',')
  }

  if (!env.LATITUDE_CLOUD) return <AutogenerateDatasetNotAvailableModal />

  return (
    <GenerateDatasetContent
      backUrl={backUrl}
      defaultName={name}
      defaultParameters={defaultParameters}
    />
  )
}
