---
title: API Access
description: Learn how to access and use Latitude's API to run your prompts.
---

For detailed endpoint specifications, request/response schemas, and the ability to try out API calls directly, please refer to the [Interactive API Documentation](https://gateway.latitude.so/api-docs/).

We recommend checking the SDK docs section in case you're looking for a specific language or framework.

## Latitude HTTP API v3 Documentation

This guide explains how to use the Latitude HTTP API v3 to interact with the Prompt Manager and run AI-powered conversations.

### Authentication

All API requests require authentication. Include your API key in the `Authorization` header of your HTTP requests:

```
Authorization: Bearer YOUR_API_KEY
```

### Base URL

The base URL for all API v3 requests is:

`https://gateway.latitude.so/api/v3`

### Rate Limiting

The API enforces rate limits based on your API key to ensure fair usage and prevent abuse.

**Limits:**

Rate limits are enforced based on your subscription plan. The following limits apply:

- **Hobby Plan:**

  - 10 requests per second

- **Team Plan:**

  - 166 requests per second (10000 requests per minute)

- **Enterprise Plan:**

  - 500 requests per second (30000 requests per minute)

Contact sales to request a custom rate limit in the enterprise plan.

When the rate limit is exceeded, the following headers are included in the response to help you manage your request rate:

- `Retry-After`: Indicates the number of seconds to wait before making a new request.
- `X-RateLimit-Limit`: The maximum number of requests allowed in the current period.
- `X-RateLimit-Remaining`: The number of requests remaining in the current period.
- `X-RateLimit-Reset`: The timestamp when the rate limit will reset.

**Example Headers:**

```http
Retry-After: 60
X-RateLimit-Limit: 1000
X-RateLimit-Remaining: 999
X-RateLimit-Reset: 1729399082482
```

These headers are sent with every request to help you monitor and adjust your request rate accordingly.

### Endpoints

#### 1. Get a Document

Retrieve a specific prompt by its path.

**Endpoint:** `GET /projects/{projectId}/versions/{versionUuid}/documents/{documentPath}`

**Path Parameters:**

- `projectId`: Your project ID (required)
- `versionUuid`: Version UUID (required, defaults to 'live' in SDKs)
- `documentPath`: Path to the document, e.g., `myfolder/myprompt.txt` (required)

**Response:**

The response contains the existing document details along with its configuration.

**Response Body:**

```json
{
  "id": "document-id",
  "documentUuid": "document-uuid",
  "path": "path/to/document",
  "content": "Document content",
  "resolvedContent": "Document content without comments",
  "contentHash": "content-hash",
  "commitId": "commit-id",
  "deletedAt": null, // or timestamp if deleted
  "createdAt": "created-at-timestamp",
  "updatedAt": "updated-at-timestamp",
  "mergedAt": "merged-at-timestamp", // or null
  "projectId": "project-id",
  "config": {
    "provider": "Provider name",
    "model": "Model name"
    // ... other config properties
  }
}
```

#### 2. Get or Create a Document

Retrieves an existing document or creates a new one if it doesn't exist.

**Endpoint:** `POST /projects/{projectId}/versions/{versionUuid}/documents/get-or-create`

**Path Parameters:**

- `projectId`: Your project ID (required)
- `versionUuid`: Version UUID (required, defaults to 'live' in SDKs)

**Request Body:**

```json
{
  "path": "path/to/document",
  "prompt": "Your prompt content here" // Optional, defaults to empty
}
```

- `path`: Path to the document (required)
- `prompt`: Initial prompt content if creating a new document (optional)

**Response:**

The response contains the created (or existing) document details along with its configuration.

**Response Body:**

```json
{
  "id": "document-id",
  "documentUuid": "document-uuid",
  "path": "path/to/document",
  "content": "Document content",
  "resolvedContent": "Document content without comments",
  "contentHash": "content-hash",
  "commitId": "commit-id",
  "deletedAt": null, // or timestamp if deleted
  "createdAt": "created-at-timestamp",
  "updatedAt": "updated-at-timestamp",
  "mergedAt": "merged-at-timestamp", // or null
  "projectId": "project-id",
  "config": {
    "provider": "Provider name",
    "model": "Model name"
    // ... other config properties
  }
}
```

#### 3. Run a Document

Run a specific document (prompt) with optional parameters.

**Endpoint:** `POST /projects/{projectId}/versions/{versionUuid}/documents/run`

**Path Parameters:**

- `projectId`: Your project ID (required)
- `versionUuid`: Version UUID (required, defaults to 'live' in SDKs)

**Request Body:**

```json
{
  "path": "path/to/document", // Required
  "parameters": { // Optional
    "key1": "value1",
    "key2": "value2"
  },
  "stream": false, // Optional, defaults to false
  "messages": [ // Optional, for continuing a conversation or providing initial messages
    {
      "role": "user", // or "system", "assistant"
      "content": [
        {
          "type": "text",
          "text": "Hello AI"
        }
        // ... other message parts like images
      ]
    }
  ],
  "conversationUuid": "existing-conversation-uuid" // Optional, to continue an existing conversation
}
```

- `path`: Path to the document to run (required).
- `parameters`: Key-value pairs for prompt parameterization (optional).
- `stream`: Optional boolean parameter (defaults to `false`). When set to true, the response will be a stream of Server-Sent Events (SSE). If false, a single JSON response containing the last event is returned.
- `messages`: An array of messages to provide context or continue a conversation. Follows the [PromptL message format](/promptl/syntax/messages) (optional).
- `conversationUuid`: UUID of an existing conversation to continue (optional).

**Response:**

- If `stream` is `true`: The response is a stream of Server-Sent Events (SSE). Check out the [Streaming Events](/guides/api/streaming-events) guide for more information about the specific events you can expect.

- If `stream` is `false`: A single JSON response is returned with the final event (typically the chain-complete event) in the following structure:

```json
{
  "uuid": "conversation-uuid", // UUID of the conversation
  "conversation": [ // Array of Message objects representing the full conversation
    // Message objects follow PromptL structure
  ],
  "response": {
    "streamType": "text" | "object", // Type of the final response
    "usage": { // Token usage information
      "promptTokens": 10,
      "completionTokens": 20,
      "totalTokens": 30
    },
    "text": "Final text response from AI", // if streamType is "text"
    "object": {}, // if streamType is "object"
    "toolCalls": [ // Array of tool calls made during the execution
      // ToolCall objects
    ]
  }
}
```

<Note>
  Message objects in `conversation` and `messages` (request) follow the [PromptL format](/promptl/syntax/messages).
</Note>

<Note>
ToolCall has the following format:

```typescript
type ToolCall = {
  id: string;
  name: string;
  arguments: Record<string, unknown>;
};
```
</Note>

#### 4. Chat

Continue an existing conversation or start a new one with a series of messages.

**Endpoint:** `POST /conversations/{conversationUuid}/chat`

**Path Parameters:**

- `conversationUuid`: UUID of the conversation (required). If you want to start a new chat and get a `conversationUuid`, you can use the "Run a Document" endpoint first without a `conversationUuid`.

**Request Body:**

```json
{
  "messages": [
    {
      "role": "user", // or "system", "assistant"
      "content": [
        {
          "type": "text",
          "text": "Next message in the conversation."
        }
        // ... other message parts
      ]
    }
  ],
  "stream": false // Optional, defaults to false
}
```

- `messages`: An array of messages to append to the conversation (required). Messages follow the [PromptL format](/promptl/syntax/messages).
- `stream`: Optional boolean parameter (defaults to `false`). When set to true, the response will be a stream of Server-Sent Events (SSE). If false, a single JSON response containing the last event is returned.

<Note>
  Message objects follow the [PromptL format](/promptl/syntax/messages).
</Note>

**Response:**
The response structure is identical to the "Run a Document" endpoint (SSE stream or a single JSON object with the final event).

Check out the [Streaming Events](/guides/api/streaming-events) guide for more information about the specific events you can expect.

#### 5. Annotate a Log (Create Evaluation Result)

Add an annotation, typically an evaluation score, to a log associated with a conversation. This is also referred to as creating an evaluation result.

**Endpoint:** `POST /conversations/{conversationUuid}/evaluations/{evaluationUuid}/annotate`

**Path Parameters:**

- `conversationUuid`: UUID of the conversation to annotate (required).
- `evaluationUuid`: UUID of the evaluation definition to use for this annotation (required).

**Request Body:**

```json
{
  "score": 2, // The raw score
  "versionUuid": "version-uuid", // Optional: UUID of the specific prompt version being evaluated
  "metadata": { // Optional: Any additional metadata
    "reason": "The output is not relevant to the prompt"
  },
  "target": "Optional target string for certain evaluation types"
}
```
- `score`: The raw score value (numeric, boolean, or text depending on the evaluation type). (Required)
- `versionUuid`: The UUID of the prompt version this annotation pertains to. (Optional)
- `metadata`: An object for any additional information. (Optional)
- `target`: The expected or target output, used by some evaluation types (e.g., for string matching). (Optional)


**Response:**

```json
{
  "uuid": "annotation-result-uuid",
  "score": 2,
  "normalizedScore": 0.5, // Score normalized to a 0-1 range, if applicable
  "metadata": {
    "reason": "The output is not relevant to the prompt"
  },
  "hasPassed": false, // Boolean indicating if the evaluation passed (based on evaluation's pass/fail criteria)
  "error": null, // Optional error message if annotation failed
  "versionUuid": "version-uuid"
}
```

#### 6. Create Log Entry

Manually create a log entry for a document interaction. This is useful for logging interactions that happened outside of the direct "Run a Document" flow.

**Endpoint:** `POST /projects/{projectId}/versions/{versionUuid}/documents/logs`

**Path Parameters:**

- `projectId`: Your project ID (required).
- `versionUuid`: Version UUID (required, defaults to 'live' in SDKs).

**Request Body:**

Messages and response should represent the interaction you want to log.

```json
{
  "path": "path/to/document", // Required: Path of the document associated with this log
  "messages": [ // Required: Array of messages in PromptL format
    {
      "role": "user",
      "content": [ { "type": "text", "text": "User input" } ]
    },
    {
      "role": "assistant",
      "content": [ { "type": "text", "text": "AI response" } ]
    }
  ],
  "response": "Full AI response content as a string", // Optional: A string representation of the AI's final response
  "conversationUuid": "optional-conversation-uuid", // Optional
  "customIdentifier": "optional-custom-id", // Optional
  "duration": 1500, // Optional: Duration of the interaction in milliseconds
  "usage": { // Optional: Token usage
      "promptTokens": 10,
      "completionTokens": 20,
      "totalTokens": 30
  },
  "metadata": { // Optional: Any other metadata
    "key": "value"
  }
}
```

- `path`: Path to the document (required).
- `messages`: Array of messages representing the conversation history. Follows [PromptL format](/promptl/syntax/messages) (required).
- `response`: A string representation of the final AI response (optional).
- `conversationUuid`: Link this log to an existing conversation (optional).
- `customIdentifier`: A custom ID you can use to reference this log (optional).
- `duration`: Duration of the call in milliseconds (optional).
- `usage`: Token usage statistics (optional).
- `metadata`: Any additional metadata to store with the log (optional).


**Response:**

```json
{
  "id": "log-entry-id", // Database ID of the log
  "uuid": "log-uuid", // Public UUID of the log
  "documentUuid": "document-uuid",
  "commitId": "commit-id", // Commit ID of the document version used
  "resolvedContent": "Document content without comments at the time of logging",
  "contentHash": "content-hash",
  "parameters": {}, // Parameters used, if any
  "customIdentifier": "optional-custom-id",
  "duration": 1500,
  "source": "api", // Source of the log, e.g., "api", "sdk"
  "createdAt": "created-at-timestamp",
  "updatedAt": "updated-at-timestamp",
  "conversationUuid": "optional-conversation-uuid"
}
```

**Error Handling**

The API uses standard HTTP status codes. In case of an error, the response body will typically contain an error message in the following format:

```json
{
  "error": {
    "message": "Error description",
    "code": "ERROR_CODE_IF_APPLICABLE"
    // ... other error details if present
  }
}
```

### Project Endpoints

#### 7. Get All Projects

Retrieves a list of all active projects within the authenticated workspace.

**Endpoint:** `GET /projects`

**Response:**

An array of project objects.

**Response Body Example:**

```json
[
  {
    "id": 1,
    "uuid": "project-uuid-1",
    "name": "My First Project",
    "description": null,
    "slug": "my-first-project",
    "color": null,
    "createdAt": "2023-01-01T12:00:00.000Z",
    "updatedAt": "2023-01-01T12:00:00.000Z",
    "workspaceId": "workspace-uuid-123",
    "creatorId": 101
  }
]
```
Each project object in the array will follow the `ProjectSchema` (details may vary slightly based on exact schema definition but generally include id, uuid, name, etc.).

#### 8. Create a Project

Creates a new project within the authenticated workspace.

**Endpoint:** `POST /projects`

**Request Body:**

```json
{
  "name": "New Awesome Project"
}
```
- `name`: The name for the new project (required, string, min 1 character).

**Response:**

The newly created project object.

**Response Body Example:**

```json
{
  "id": 2,
  "uuid": "project-uuid-2",
  "name": "New Awesome Project",
  "description": null,
  "slug": "new-awesome-project",
  "color": null,
  "createdAt": "2023-01-02T14:30:00.000Z",
  "updatedAt": "2023-01-02T14:30:00.000Z",
  "workspaceId": "workspace-uuid-123",
  "creatorId": 101
}
```

#### 9. Push Document Changes to a Version (Commit)

Pushes a set of document changes (creations, modifications, deletions) to a specific version (commit) of a project.

**Endpoint:** `POST /projects/{projectId}/versions/{versionUuid}/push`

**Path Parameters:**

- `projectId`: The ID of the project (required).
- `versionUuid`: The UUID of the version (commit) to push changes to (required).

**Request Body:**

```json
{
  "changes": [
    {
      "path": "/my-prompt.txt",
      "content": "New updated content for the prompt.",
      "status": "modified", // "added", "modified", "deleted", or "unchanged"
      "contentHash": "optional-sha256-hash-of-the-new-content" // Optional
    },
    {
      "path": "/new-prompt.txt",
      "content": "This is a brand new prompt.",
      "status": "added"
    },
    {
      "path": "/old-prompt.txt",
      "content": "", // Content can be empty for deletions
      "status": "deleted"
    }
  ]
}
```
- `changes`: An array of change objects (required).
    - `path`: Document path (string, required).
    - `content`: Document content (string, required for `added`/`modified`, can be empty for `deleted`).
    - `status`: The status of the change (`added`, `modified`, `deleted`, `unchanged`) (string, required).
    - `contentHash`: Optional SHA256 hash of the content for validation.

**Response:**

Confirms the push operation.

**Response Body Example:**

```json
{
  "versionUuid": "version-uuid-here", // UUID of the version after push
  "documentsProcessed": 3 // Number of documents processed
}
```

### Version Endpoints

#### 10. Get a Project Version (Commit)

Retrieves details for a specific version (commit) of a project.

**Endpoint:** `GET /projects/{projectId}/versions/{versionUuid}`

**Path Parameters:**

- `projectId`: The ID of the project (required).
- `versionUuid`: The UUID of the version (commit) (required).

**Response:**

The version (commit) object.

**Response Body Example:**
(Based on `VersionSchema` / `CommitSchema` from route files)
```json
{
  "id": 123,
  "uuid": "version-uuid-abc",
  "projectId": 1,
  "message": "Initial commit",
  "authorName": "Jules Verne",
  "authorEmail": "jules@example.com",
  "authorId": 101,
  "createdAt": "2023-01-01T10:00:00.000Z",
  "updatedAt": "2023-01-01T10:00:00.000Z",
  "status": "committed", // Example status
  "parentCommitUuid": null
}
```

#### 11. Create a Project Version (Commit)

Creates a new version (commit) for a project. Typically, versions are based on the current state of documents or changes from a parent version.

**Endpoint:** `POST /projects/{projectId}/versions`

**Path Parameters:**

- `projectId`: The ID of the project (required).

**Request Body:**

```json
{
  "name": "My New Version Title" // This corresponds to the commit message or title
}
```
- `name`: A name or message for the version (commit) (string, required).

**Response:**

The newly created version (commit) object.

**Response Body Example:**
(Based on `CommitSchema` from route files)
```json
{
  "id": 124,
  "uuid": "new-version-uuid-xyz",
  "projectId": 1,
  "message": "My New Version Title",
  "authorName": "Jules Verne",
  "authorEmail": "jules@example.com",
  "authorId": 101,
  "createdAt": "2023-01-03T11:00:00.000Z",
  "updatedAt": "2023-01-03T11:00:00.000Z",
  "status": "committed", // Example status
  "parentCommitUuid": "version-uuid-abc" // Example parent
}
```

### Document Endpoints (within a Version)

The following endpoints operate on documents within a specific project version.

#### 12. Get All Documents in a Version

Retrieves a list of all documents (prompts) within a specific version of a project.

**Endpoint:** `GET /projects/{projectId}/versions/{versionUuid}/documents`

**Path Parameters:**

- `projectId`: Your project ID (required).
- `versionUuid`: Version UUID (required, defaults to 'live' in SDKs).

**Response:**

An array of document objects.

**Response Body Example:**
(Based on `documentPresenterSchema`)
```json
[
  {
    "id": "doc-id-1",
    "documentUuid": "doc-uuid-1",
    "path": "folder/prompt1.txt",
    "content": "Content of prompt 1",
    "resolvedContent": "Content of prompt 1 without comments",
    "contentHash": "hash1",
    "commitId": "commit-id-of-this-version",
    "deletedAt": null,
    "createdAt": "2023-01-01T00:00:00.000Z",
    "updatedAt": "2023-01-01T00:00:00.000Z",
    "mergedAt": null,
    "projectId": "project-id-1",
    "config": { "provider": "openai", "model": "gpt-4" }
  },
  {
    "id": "doc-id-2",
    "documentUuid": "doc-uuid-2",
    "path": "prompt2.txt",
    // ... other fields
  }
]
```

#### 13. Create a Document in a Version

Creates a new document (prompt) within a specific version of a project.

**Endpoint:** `POST /projects/{projectId}/versions/{versionUuid}/documents`

**Path Parameters:**

- `projectId`: Your project ID (required).
- `versionUuid`: Version UUID (required, defaults to 'live' in SDKs, or specify a particular version).

**Request Body:**

```json
{
  "path": "newfolder/my_new_prompt.txt",
  "prompt": "This is the initial content of my new prompt." // Optional, defaults to empty
}
```
- `path`: The full path for the new document (string, required).
- `prompt`: The initial content for the prompt (string, optional).

**Response:**

The newly created document object.

**Response Body Example:**
(Based on `documentPresenterSchema`)
```json
{
  "id": "new-doc-id",
  "documentUuid": "new-doc-uuid",
  "path": "newfolder/my_new_prompt.txt",
  "content": "This is the initial content of my new prompt.",
  "resolvedContent": "This is the initial content of my new prompt.",
  "contentHash": "new-hash",
  "commitId": "commit-id-of-this-version",
  "deletedAt": null,
  "createdAt": "2023-01-04T00:00:00.000Z",
  "updatedAt": "2023-01-04T00:00:00.000Z",
  "mergedAt": null,
  "projectId": "project-id-1",
  "config": { "provider": "default", "model": "default" } // Example config
}
```
<Note>
  The "Get a Document", "Get or Create a Document", "Run a Document", "Chat", "Annotate a Log", and "Create Log Entry" endpoints documented earlier also operate within the context of projects and versions, and their paths reflect this (e.g., `/projects/{projectId}/versions/{versionUuid}/documents/...`).
</Note>
