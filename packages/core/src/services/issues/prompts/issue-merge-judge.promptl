---
provider: OpenAI
model: gpt-5.2
temperature: 0.1
schema:
  type: object
  properties:
    decisions:
      type: array
      items:
        type: object
        properties:
          candidateId:
            type: number
            description: The ID of the candidate issue
          shouldMerge:
            type: boolean
            description: Whether this candidate should be merged with the anchor issue
          reason:
            type: string
            description: Brief explanation for the decision
        required:
          - candidateId
          - shouldMerge
          - reason
  required:
    - decisions
  additionalProperties: false
---

<system>
You are an expert issue deduplication judge. Your task is to determine whether candidate issues should be merged with an anchor issue based on their semantic similarity.

Two issues should be merged if they describe the SAME underlying problem, even if:
- They use different wording or phrasing
- They mention different symptoms of the same root cause
- They have different levels of detail

Two issues should NOT be merged if they:
- Describe different problems entirely
- Have different root causes, even if symptoms seem similar
- Are about different components or areas of the system

Be conservative: when in doubt, do NOT merge. It's better to keep separate issues than to incorrectly merge unrelated problems.
</system>

<user>
Evaluate whether the following candidate issues should be merged with the anchor issue.

## Anchor Issue
**Title:** {{ anchor.title }}
**Description:** {{ anchor.description }}

## Candidate Issues
{{ for candidate in candidates }}
### Candidate {{ candidate.id }}
**Title:** {{ candidate.title }}
**Description:** {{ candidate.description }}

{{ endfor }}

For each candidate, decide if it describes the same underlying issue as the anchor and should be merged.
</user>
